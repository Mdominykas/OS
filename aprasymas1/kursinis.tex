\documentclass{VUMIFInfKursinis}
\usepackage{algorithmicx}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{bm}
\usepackage{color}
\usepackage{graphicx}
% \usepackage{hyperref}  % Nuorodų aktyvavimas
\usepackage{url}


% Titulinio aprašas
\university{Vilniaus universitetas}
\faculty{Matematikos ir informatikos fakultetas}
\institute{Informatikos institutas}  % Užkomentavus šią eilutę - institutas neįtraukiamas į titulinį
\department{Informatikos katedra}
\papertype{Operacinių sistemų pirmoji užduotis}
\title{Virtualios ir realios mašinos projektas}
%\titleineng{Modeling of Risk Management Process}
\status{3 kurso 1 grupės studentas}
\author{Dominykas Marma}
% \secondauthor{Vardonis Pavardonis}   % Pridėti antrą autorių
\supervisor{Mantas Grubliauskas}
\date{Vilnius \\ \the\year}

% Nustatymai
% \setmainfont{Palemonas}   % Pakeisti teksto šriftą į Palemonas (turi būti įdiegtas sistemoje)
\bibliography{bibliografija} 

\begin{document}
\maketitle

\tableofcontents

\section{Užduoties aparašymas}

Virtualios mašinos procesoriaus komandos operuoja su duomenimis, esančiais registruose ir ar atmintyje. Yra komandos duomenų persiuntimui iš atminties į registrus ir atvirkščiai, aritmetinės (sudėties, atimties, daugybos, dalybos, palyginimo), sąlyginio ir besąlyginio valdymo perdavimo, įvedimo, išvedimo, darbo su failais (atidarymo, skaitymo, rašymo, uždarymo, sunaikinimo) ir programos pabaigos komandos. Registrai yra tokie: komandų skaitiklis, bent du bendrosios paskirties registrai, požymių registras (požymius formuoja aritmetinės, o į juos reaguoja sąlyginio valdymo perdavimo komandos). Atminties dydis yra 16 blokų po 16 žodžių (žodžio ilgį pasirinkite patys).


Realios mašinos procesorius gali dirbti dviem režimais: vartotojo ir supervizoriaus. Virtualios mašinos atmintis atvaizduojama į vartotojo atmintį naudojant puslapių transliaciją. Yra taimeris, kas tam tikrą laiko intervalą generuojantis pertraukimus. Įvedimui naudojama klaviatūra, išvedimui - ekranas. Yra išorinės atminties įrenginys - kietasis diskas.

Vartotojas, dirbantis su sistema, programas paleidžia interaktyviai, surinkdamas atitinkamą komandą. Laikoma, kad vartotojo programos yra realios mašinos kietajame diske, į kurį jos patalpinamos „išorinėmis", modelio, o ne projektuojamos OS, priemonėmis.

\section{Realios mašinos modelis}

Realią mašiną sudaro procesorius.

Procesorius turi registrus:

\begin{enumerate}
	\item IC - komandų skaitiklis - 4 baitai.
	\item R1, R2, R3 - bendrosios paskirties registrai iš 6 baitų.
	\item FLAGS - požymių  registras, susidedantis iš 4 šių dviejų bitų (nuo didžiausio iki mažiausio): 
	\begin{itemize}
		\item ZF - yra 1, jei aritmetinės operacijos rezultatas yra 0, o kitu atveju išvalomas.
		\item SF - nustatomas 1, jei aritmetinės oepracijos rezultatas yra teigiamas, o priešingu atveju - 0.
	\end{itemize}
	\item TI - 1 bito registras nurodantis ar įvyko laikrodžio pertraukimas.
	\item SI - 1 bito registras nurodantis ar įvyko sisteminis pertraukimas.
\end{enumerate}

Procesoriuje yra laikrodis, kuris kas 1000 operacijų generuoja pertraukimus.

Taip pat procesorius turi loginį aritmetinį įrenginį, kuris vykdo aritmetines operacijas.

Įvedimo įrenginys - klaviatūra, kuri turi savo kanalą.

Yra ekranas - išvedimo įrenginys. Jam yra skirtas kanalas.

Taip pat yra išorinės atminties įrenginys - kietasis diskas. Jis taip pat turi savo kanalą.

\section{Virtualios mašinos modelis}

Virtuali mašina - operacinės sistemos konstruktas, kurio pagalba kiekvienos programos veikimas yra izoliajamos nuo visų kitų.

\subsection{Atmintis}

Vieno mašinos žodžio ilgis yra 6 baitai. Virtuali mašina turi 16 blokų po 16 žodžių.

\subsection{Komandos}

Visos komandos yra aprašomos vienu žodžiu - 6 baitais.

\subsubsection{Aritmetinės}
\begin{itemize}
	
	\item ADDmxy - jei m = 0, tai operacija sudeda skaičius esančius registruose Rx, Ry ir rezultatą patalpina į R1.
	\item SUBmxy - jei m = 0, tai operacija atima iš skaičiaus esančio registre Rx, skaičių iš registro Ry ir rezultatą patalpina į R1. Jei m=1, tai operaciją atlieka su registru Rx ir konstanta y.
	\item MULmxy - jei m = 0, tai operacija sudaugina skaičius esančius registruose Rx, Ry ir rezultatą patalpina į R1. Jei m=1, tai operaciją atlieka su registru Rx ir konstanta y.
	\item DIVmxy - jei m = 0, tai operacija padalina skaičių esantį registre Rx, iš skaičiaus esančio registre Ry ir rezultatą patalpina į R1. Jei m=1, tai operaciją atlieka su registru Rx ir konstanta y.
	\item CMPmxy - jei m = 0, tai operacija palygina skaičius esančius registruose Rx ir Ry bei pagal Rx-Ry reikšmę nustato registro FLAGS reikšmę. Jei m=1, tai operaciją atlieka su registru Rx ir konstanta y.
\end{itemize}

\subsubsection{Duomenų judėjimo}
\begin{itemize}
	\item mov - copes data (register <-> memory (arba reg <-> reg))
\end{itemize}

\subsubsection{Valdymo}
\begin{itemize}
	\item jmp - jump
	\item je - jump if equal
	\item jne - jump if not equal
	\item jl - jump if less
	\item jle - jump if less or equal
	\item jg - jump if greater
	\item jge - jump if greater or equal
\end{itemize}

\subsubsection{Darbas su failais}
Darbo su failais metu yra naudojamos simbolių eilutės. Tai nulių besibaigianti baitų seka.
\begin{itemize}
	\item OPENF - atidaro failą, kurio pavadinimas yra simbolių eilutė, kurios pradžios adresas yra R1 reikšmė. Operacijos pabaigoje į R2 yra įrašomas failo numeris. Jeigu failas yra nerandamas - nustato SI=1.
	\item CLOSEF - uždaro failą, kurio numeris yra įrašytas  R2. Jeigu norimas failas nėra rastas, ar jau buvo uždarytas yra nustatoma SI=1
	\item WRITEF - persiunčia simbolių eilutę, kurios adresas yra nurodytas R1 į kanalų įrenginį.
	\item READ - perskaito simbolį iš failo ir jo reikšmę įrašo į R1. R2 - nuskaitomo failo numeris.
	\item DELETF - sunaikiną failą, kurio pavadimas yra simbolių eilutė, kurios pradžios adresas yra nurodomas R1 reikmšmėje.
\end{itemize}

\subsubsection{Įvedimas ir išvedimas}
\begin{itemize}
	\item WRITEU - parašo simbolių eilutę, kurios pradžios adresas yra nurodytas registre R1 į ekraną.
	\item READU - perskaito simbolį įvestą iš klaviatūros bei reikšmę patalpina į R1.
\end{itemize}

\subsubsection{Programos pabaigos}
\begin{itemize}
	\item HALT - baigia programos darbą.
\end{itemize}

\printbibliography[heading=bibintoc] % Literatūros šaltiniai aprašomi
\appendix  % Priedai

\end{document}
